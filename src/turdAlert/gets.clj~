(ns turdAlert.gets
    (:use korma.core
    	  korma.db
	  turdAlert.database.models))

(defn encrypt-pw [pw] 1000)

(defn get-user [username password]
      (let [digest (encrypt-pw password)]
      	   (select users (fields :id) (where {:username username :password digest}))))

(defn new-user [email username password]
      (let [digest (encrypt-pw password)
      	    id (count (select users))]
      	   (insert users (values {:id id, :username username, :password digest, :email email}))))

(defn reset-password [username] nil) ;;sends an email to the users email

(defn new-post [user nickname title city state content]
  (insert posts
    (values {:id 1, :title title, :city city, :state state,
    	     :content content, :nickname nickname, :user user, :votes 0})))

(defn get-ad [id] nil) ;;returns link for an ad

(defn get-posts [topic page] "gets posts on page")